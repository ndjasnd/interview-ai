# GUI 界面使用指南

## 安装依赖

```bash
# 安装 PyQt6
pip install PyQt6

# 安装其他依赖（如果还没装）
pip install pyaudio numpy tencentcloud-sdk-python openai
```

---

## 启动 GUI

```bash
python gui.py
```

---

## 界面说明

### 主界面布局

```
┌─────────────────────────────────────────────────────────────┐
│                    🎯 面试助手                               │
├───────────────────────────┬─────────────────────────────────┤
│   👔 面试官问题            │    🤖 AI 回答建议                │
│                           │                                 │
│ [实时显示识别结果]         │  [流式显示 AI 建议]              │
│                           │                                 │
│                           │                                 │
│                           │                                 │
│                           │                                 │
│                           │                                 │
│                           │                                 │
├───────────────────────────┴─────────────────────────────────┤
│ [🎤 启动语音识别] [🤖 获取 AI 建议] [🗑️  清空]              │
├─────────────────────────────────────────────────────────────┤
│ 状态栏：准备就绪                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 使用流程

### 1. 启动语音识别

点击 **🎤 启动语音识别** 按钮：

- 程序会检测音频设备（BlackHole + 麦克风）
- 初始化腾讯云 ASR
- 启动后台识别线程

**状态变化：**
```
准备就绪 → 检测音频设备... → 初始化腾讯云 ASR... → ✓ 系统就绪
```

**按钮变化：**
```
🎤 启动语音识别 → 正在启动... → ✓ 运行中（绿色）
```

### 2. 面试官提问

面试官说话后，左侧会自动显示识别结果：

```
👔 面试官问题
─────────────────
14:23:15 - 请介绍一下你的项目经验

14:25:30 - 你在这个项目中遇到的最大挑战是什么？

14:28:10 - 如何优化系统性能？
```

**特点：**
- ✅ 实时显示，无需手动刷新
- ✅ 自动添加时间戳
- ✅ 自动滚动到最新内容

### 3. 获取 AI 建议

点击 **🤖 获取 AI 建议** 按钮：

- 自动提取最后一个面试官问题
- 发送给 Qwen AI
- 右侧流式显示回答建议

**右侧显示效果：**
```
🤖 AI 回答建议
──────────────────
💭 AI 正在思考...

（几秒后流式显示）

我会从三个方面回答这个问题：

1. 项目背景和规模
   我负责的是一个...

2. 具体职责和贡献
   在项目中我主要...

3. 技术亮点和成果
   ...
```

**特点：**
- ✅ 流式显示（像打字机一样逐字显示）
- ✅ 实时更新，无需等待全部完成
- ✅ 可以边看边思考

### 4. 清空内容

点击 **🗑️  清空** 按钮清空所有显示内容。

---

## 快捷键

| 按键 | 功能 |
|------|------|
| 无需快捷键 | GUI 自动更新 |
| 点击按钮 | 触发相应功能 |

---

## 状态栏说明

状态栏显示当前系统状态：

| 状态 | 说明 |
|------|------|
| `准备就绪` | 程序启动完成，等待操作 |
| `检测音频设备...` | 正在查找 BlackHole 和麦克风 |
| `初始化腾讯云 ASR...` | 连接腾讯云服务 |
| `✓ 系统就绪` | 语音识别已启动，可以开始面试 |
| `💬 新问题: ...` | 检测到新的面试官问题 |
| `✓ AI 建议已生成` | AI 回复完成 |
| `❌ 错误信息` | 出现错误 |

---

## 常见问题

### Q1: 左侧没有显示面试官问题

**原因：**
1. 音频设备配置错误（未使用 Multi-Output Device）
2. BlackHole 未捕获到音频
3. 面试官说话音量太小

**解决方法：**
1. 按照 `AUDIO_SETUP_GUIDE.md` 配置多输出设备
2. 确认系统输出选择了 Multi-Output Device
3. 提高音量后重试

### Q2: 点击"获取 AI 建议"按钮没反应

**原因：**
1. 没有识别到面试官问题
2. LLM 未初始化（API Key 未配置）
3. 网络连接问题

**解决方法：**
1. 等待左侧显示问题后再点击
2. 检查 `config.py` 中的 API Key 配置
3. 检查网络连接

### Q3: AI 回复很慢或卡住

**原因：**
1. 网络延迟
2. AI 服务负载高
3. 问题太复杂

**解决方法：**
- 等待一段时间（通常 3-10 秒）
- 如果超过 30 秒无响应，重启 GUI

### Q4: GUI 闪退或无响应

**原因：**
1. PyQt6 未正确安装
2. 后台线程崩溃
3. 系统资源不足

**解决方法：**
```bash
# 重新安装 PyQt6
pip install --upgrade PyQt6

# 重启程序
python gui.py
```

### Q5: 如何同时运行命令行和 GUI？

不建议同时运行。选择其一：
- **GUI 模式**：`python gui.py`（推荐新用户）
- **命令行模式**：`python main.py`（调试或轻量使用）

---

## GUI vs 命令行模式对比

| 特性 | GUI 模式 | 命令行模式 |
|------|---------|-----------|
| **界面** | 图形化界面 | 终端文本 |
| **触发 AI** | 点击按钮 | Ctrl+V |
| **查看历史** | 左侧始终显示 | 滚动终端 |
| **流式显示** | ✅ 实时更新 | ✅ 实时打印 |
| **易用性** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| **资源占用** | 较高 | 较低 |
| **适合场景** | 正式面试 | 调试测试 |

---

## 界面截图说明

### 初始状态
- 左右两栏均为空
- 按钮处于默认状态
- 状态栏显示"准备就绪"

### 运行状态
- 启动按钮变绿，显示"✓ 运行中"
- 左侧实时显示面试官问题
- 右侧等待 AI 建议或显示历史建议

### AI 思考状态
- 右侧显示"💭 AI 正在思考..."
- 按钮变灰，显示"AI 思考中..."
- 状态栏显示进度

### 完成状态
- 右侧完整显示 AI 建议
- 按钮恢复可用
- 状态栏显示"✓ AI 建议已生成"

---

## 调试模式

如果遇到问题，可以在终端查看详细日志：

```bash
# 运行 GUI 并查看后台日志
python gui.py

# 终端会显示：
# - 音频设备检测信息
# - ASR 识别结果
# - LLM 请求状态
# - 错误堆栈信息
```

---

## 高级配置

### 修改界面主题

编辑 `gui.py` 的 `main()` 函数：

```python
# 可选主题：Fusion（默认）、Windows、macOS
app.setStyle("Fusion")
```

### 调整窗口大小

编辑 `init_ui()` 方法：

```python
self.setGeometry(100, 100, 1400, 800)  # (x, y, width, height)
```

### 修改字体

编辑各 `QLabel` 和 `QTextEdit` 的字体设置：

```python
label.setFont(QFont("Arial", 16, QFont.Weight.Bold))
```

---

## 性能优化建议

1. **关闭不需要的功能**
   - 如果不需要监听麦克风，可以在后台代码中禁用

2. **降低轮询频率**
   - 定时器默认 100ms，可以调整到 200ms

3. **清理历史记录**
   - 定期点击"清空"按钮释放内存

---

## 故障排查清单

运行 GUI 前检查：

- [ ] PyQt6 已安装：`pip list | grep PyQt6`
- [ ] BlackHole 已配置：按 `AUDIO_SETUP_GUIDE.md` 设置
- [ ] API Key 已配置：检查 `config.py`
- [ ] 网络正常：可以访问 Qwen API
- [ ] 系统输出选择了 Multi-Output Device

全部勾选 → ✅ 可以正常运行！

---

**祝你面试顺利！** 🚀

