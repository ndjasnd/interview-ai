# LLM AI åŠ©æ‰‹ä½¿ç”¨æŒ‡å—

## åŠŸèƒ½è¯´æ˜

é¢è¯•è¾…åŠ©å·¥å…·ç°åœ¨æ”¯æŒ AI åŠ©æ‰‹åŠŸèƒ½ï¼š
- å®æ—¶æ•è·é¢è¯•å®˜çš„é—®é¢˜
- æŒ‰ `Ctrl+V` å°†é—®é¢˜å‘é€ç»™ AI
- AI æµå¼è¿”å›ä¸“ä¸šçš„å›ç­”å»ºè®®

---

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

æ ¹æ®ä½ é€‰æ‹©çš„ LLM æä¾›å•†å®‰è£…å¯¹åº”çš„åº“ï¼š

#### ä½¿ç”¨ OpenAIï¼ˆæ¨èï¼‰

```bash
pip install openai pynput
```

#### ä½¿ç”¨ Anthropic Claude

```bash
pip install anthropic pynput
```

---

### 2. é…ç½® API Key

ç¼–è¾‘ `config.py`ï¼Œè®¾ç½®ä½ çš„ API Keyï¼š

#### OpenAI é…ç½®

```python
# ============ LLM é…ç½® ============
LLM_PROVIDER = "openai"  # ä½¿ç”¨ OpenAI

# OpenAI é…ç½®
OPENAI_API_KEY = "sk-xxx"  # æ›¿æ¢ä¸ºä½ çš„ OpenAI API Key
OPENAI_MODEL = "gpt-4"  # æˆ– "gpt-3.5-turbo"
OPENAI_BASE_URL = None  # å¯é€‰ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹å…¼å®¹æ¥å£
```

**è·å– API Key:**
- å®˜æ–¹ï¼šhttps://platform.openai.com/api-keys
- å›½å†…é•œåƒï¼šå¯æœç´¢"OpenAI å›½å†…é•œåƒ"

#### Anthropic Claude é…ç½®

```python
# ============ LLM é…ç½® ============
LLM_PROVIDER = "anthropic"  # ä½¿ç”¨ Claude

# Anthropic é…ç½®
ANTHROPIC_API_KEY = "sk-ant-xxx"  # æ›¿æ¢ä¸ºä½ çš„ Anthropic API Key
ANTHROPIC_MODEL = "claude-3-5-sonnet-20241022"
```

**è·å– API Key:** https://console.anthropic.com/

---

### 3. è¿è¡Œç¨‹åº

```bash
python main.py
```

ä½ ä¼šçœ‹åˆ°ï¼š

```
âœ“ ç³»ç»Ÿå°±ç»ªï¼
  ğŸ”Š ç›‘å¬æ‰¬å£°å™¨ï¼šæ•è·é¢è¯•å®˜è¯­éŸ³
  ğŸ™ï¸  ç›‘å¬éº¦å…‹é£ï¼šæ•è·ä½ çš„è¯­éŸ³

  ğŸ¤– AI åŠ©æ‰‹ï¼šå·²å¯ç”¨
     æŒ‰ Ctrl+V å‘é€é—®é¢˜ç»™ AI

âŒ¨ï¸  é”®ç›˜ç›‘å¬å·²å¯åŠ¨
   æŒ‰ Ctrl+V å‘é€é¢è¯•å®˜é—®é¢˜ç»™ AI
   æŒ‰ Ctrl+C é€€å‡ºç¨‹åº
```

---

## ä½¿ç”¨æµç¨‹

### 1. é¢è¯•å®˜æé—®

ç¨‹åºä¼šè‡ªåŠ¨è¯†åˆ«é¢è¯•å®˜çš„è¯­éŸ³ï¼š

```
é¢è¯•å®˜è¯´: è¯·ä»‹ç»ä¸€ä¸‹ä½ åœ¨ä¸Šä¸ªé¡¹ç›®ä¸­é‡åˆ°çš„æœ€å¤§æŠ€æœ¯æŒ‘æˆ˜
  â±ï¸  ASRè€—æ—¶: 0.47ç§’ | æ€»è€—æ—¶: 0.47ç§’ | éŸ³é¢‘æ—¶é•¿: 4.40ç§’
```

### 2. æŒ‰ Ctrl+V è·å– AI å»ºè®®

æŒ‰ä¸‹ `Ctrl+V` åï¼ŒAI ä¼šæµå¼è¿”å›å›ç­”å»ºè®®ï¼š

```
============================================================
ğŸ“ é¢è¯•å®˜é—®é¢˜ï¼šè¯·ä»‹ç»ä¸€ä¸‹ä½ åœ¨ä¸Šä¸ªé¡¹ç›®ä¸­é‡åˆ°çš„æœ€å¤§æŠ€æœ¯æŒ‘æˆ˜
------------------------------------------------------------
ğŸ¤– AI å»ºè®®ï¼š
æˆ‘ä¼šä»ä¸‰ä¸ªæ–¹é¢å›ç­”è¿™ä¸ªé—®é¢˜ï¼š

1. **æŠ€æœ¯æŒ‘æˆ˜æœ¬èº«**
åœ¨ä¸Šä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°çš„æœ€å¤§æŠ€æœ¯æŒ‘æˆ˜æ˜¯é«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜...

2. **è§£å†³æ–¹æ¡ˆ**
æˆ‘é‡‡ç”¨äº†åˆ†å¸ƒå¼é” + äº‹ä»¶æº¯æºçš„æ¶æ„...

3. **ç»“æœå’Œæ”¶è·**
æœ€ç»ˆç³»ç»Ÿæ€§èƒ½æå‡äº†3å€ï¼Œå­¦åˆ°äº†...
============================================================
```

### 3. å‚è€ƒ AI å»ºè®®å›ç­”

æ ¹æ® AI çš„å»ºè®®ï¼Œç»„ç»‡ä½ è‡ªå·±çš„å›ç­”ã€‚

---

## é«˜çº§é…ç½®

### ä½¿ç”¨ç¬¬ä¸‰æ–¹ OpenAI å…¼å®¹æ¥å£

å¦‚æœä½ ä½¿ç”¨å›½å†…é•œåƒæˆ–å…¶ä»–å…¼å®¹ OpenAI API çš„æœåŠ¡ï¼š

```python
# config.py
OPENAI_BASE_URL = "https://your-mirror-url.com/v1"  # è®¾ç½®è‡ªå®šä¹‰ API åœ°å€
```

### è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯

ç¼–è¾‘ `llm.py` ä¸­çš„ `_default_system_prompt()` æ–¹æ³•ï¼š

```python
def _default_system_prompt(self) -> str:
    return """ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é¢è¯•åŠ©æ‰‹...ï¼ˆè‡ªå®šä¹‰æç¤ºè¯ï¼‰"""
```

---

## æ•…éšœæ’æŸ¥

### 1. "æœªé…ç½® OpenAI API Key"

ç¡®ä¿åœ¨ `config.py` ä¸­æ­£ç¡®è®¾ç½®äº† API Keyï¼š

```python
OPENAI_API_KEY = "sk-xxx"  # ä¸è¦ç•™ç©ºæˆ–ä½¿ç”¨é»˜è®¤å€¼
```

### 2. "æœªå®‰è£… pynput åº“"

```bash
pip install pynput
```

### 3. "æ²¡æœ‰æ•è·åˆ°é¢è¯•å®˜çš„é—®é¢˜"

- ç¡®ä¿é¢è¯•å®˜è¯´è¯åç­‰å¾…è¯†åˆ«å®Œæˆ
- æ£€æŸ¥æ˜¯å¦æ­£ç¡®é…ç½®äº† BlackHole éŸ³é¢‘è®¾å¤‡
- æŸ¥çœ‹ç»ˆç«¯æ˜¯å¦æœ‰ "é¢è¯•å®˜è¯´:" çš„è¾“å‡º

### 4. API è°ƒç”¨å¤±è´¥

- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤ API Key æ˜¯å¦æœ‰æ•ˆ
- æŸ¥çœ‹ä½™é¢æ˜¯å¦å……è¶³
- å¦‚æœä½¿ç”¨ç¬¬ä¸‰æ–¹æ¥å£ï¼Œç¡®è®¤ `OPENAI_BASE_URL` é…ç½®æ­£ç¡®

---

## è´¹ç”¨è¯´æ˜

### OpenAI è´¹ç”¨ï¼ˆå‚è€ƒï¼‰

- GPT-4: ~$0.03/1K tokensï¼ˆè¾“å…¥ï¼‰+ $0.06/1K tokensï¼ˆè¾“å‡ºï¼‰
- GPT-3.5-turbo: ~$0.001/1K tokensï¼ˆè¾“å…¥ï¼‰+ $0.002/1K tokensï¼ˆè¾“å‡ºï¼‰

ä¸€æ¬¡é¢è¯•é—®ç­”å¤§çº¦æ¶ˆè€— 500-1000 tokensï¼Œè´¹ç”¨çº¦ï¼š
- GPT-4: $0.05-0.10/æ¬¡
- GPT-3.5: $0.002-0.004/æ¬¡

### Anthropic è´¹ç”¨ï¼ˆå‚è€ƒï¼‰

- Claude 3.5 Sonnet: ~$0.003/1K tokensï¼ˆè¾“å…¥ï¼‰+ $0.015/1K tokensï¼ˆè¾“å‡ºï¼‰

---

## é”®ç›˜å¿«æ·é”®

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Ctrl+V` | å‘é€é¢è¯•å®˜é—®é¢˜ç»™ AI |
| `Ctrl+C` | é€€å‡ºç¨‹åº |

---

## æ³¨æ„äº‹é¡¹

1. **éšç§ä¿æŠ¤**
   - æ‰€æœ‰å¯¹è¯éƒ½ä¼šå‘é€åˆ° OpenAI/Anthropic æœåŠ¡å™¨
   - ä¸è¦åœ¨é¢è¯•ä¸­æ³„éœ²å…¬å¸æœºå¯†æˆ–æ•æ„Ÿä¿¡æ¯
   - å»ºè®®åªç”¨äºç»ƒä¹ å’Œå­¦ä¹ 

2. **ä½¿ç”¨å»ºè®®**
   - AI çš„å›ç­”ä»…ä¾›å‚è€ƒï¼Œéœ€è¦ç»“åˆè‡ªå·±çš„ç»éªŒ
   - é¿å…ç…§æ¬ AI çš„å›ç­”ï¼Œè¦ç”¨è‡ªå·±çš„è¯­è¨€è¡¨è¾¾
   - é¢è¯•å®˜å¯èƒ½ä¼šè¿½é—®ç»†èŠ‚ï¼Œç¡®ä¿ç†è§£ AI çš„å»ºè®®

3. **åˆè§„æ€§**
   - è¯·åœ¨åˆæ³•åˆè§„çš„åœºæ™¯ä¸‹ä½¿ç”¨æœ¬å·¥å…·
   - å°Šé‡é¢è¯•æµç¨‹å’ŒèŒä¸šé“å¾·

---

## å¸¸è§é—®é¢˜

### Q: macOS æç¤º"æ— æ³•ç›‘å¬é”®ç›˜"

A: éœ€è¦æˆäºˆç»ˆç«¯"è¾…åŠ©åŠŸèƒ½"æƒé™ï¼š
1. ç³»ç»Ÿåå¥½è®¾ç½® â†’ å®‰å…¨æ€§ä¸éšç§ â†’ éšç§ â†’ è¾…åŠ©åŠŸèƒ½
2. æ·»åŠ ä½ çš„ç»ˆç«¯åº”ç”¨ï¼ˆå¦‚ Terminal.appï¼‰

### Q: å¯ä»¥ä¸ä½¿ç”¨ AI åŠŸèƒ½å—ï¼Ÿ

A: å¯ä»¥ã€‚å¦‚æœæ²¡æœ‰é…ç½® API Keyï¼Œç¨‹åºä¼šè·³è¿‡ LLM åˆå§‹åŒ–ï¼Œåªä¿ç•™è¯­éŸ³è¯†åˆ«åŠŸèƒ½ã€‚

### Q: å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ä¸ª LLM å—ï¼Ÿ

A: ç›®å‰ä¸æ”¯æŒã€‚åœ¨ `config.py` ä¸­è®¾ç½® `LLM_PROVIDER` ä¸º "openai" æˆ– "anthropic"ã€‚

---

## å¼€å‘è€…ä¿¡æ¯

LLM æ¨¡å—æ”¯æŒæ‰©å±•å…¶ä»–æä¾›å•†ï¼Œåªéœ€å®ç° `LLMProvider` æ¥å£ï¼š

```python
class CustomProvider(LLMProvider):
    def chat_stream(self, messages: list[dict], system_prompt: Optional[str] = None) -> Iterator[str]:
        # å®ç°ä½ çš„é€»è¾‘
        yield "response chunk"
```

---

**ç¥ä½ é¢è¯•é¡ºåˆ©ï¼** ğŸš€


